<!DOCTYPE html>
<html lang="ko" data-theme="light">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í† ì–‘ ì‹œë£Œ ì ‘ìˆ˜ ëŒ€ì¥</title>
    <!-- í°íŠ¸ preconnect ë° preloadë¡œ ì„±ëŠ¥ ìµœì í™” (bundle-defer-third-party) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap" media="print" onload="this.media='all'">
    <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap"></noscript>
    <link rel="preload" as="style" href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" media="print" onload="this.media='all'">
    <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined"></noscript>
    <script src="https://cdn.tailwindcss.com?plugins=typography"></script>
    <script>
        tailwind.config = {
            darkMode: ['selector', '[data-theme="dark"]'],
            theme: {
                extend: {
                    colors: {
                        primary: "#22C55E",
                        "background-light": "#F8FAFC",
                        "background-dark": "#18181B",
                    },
                    fontFamily: {
                        display: ["Noto Sans KR", "sans-serif"],
                    },
                    borderRadius: {
                        DEFAULT: "12px",
                    },
                },
            },
        };
    </script>
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="soil-style.css">
    <style>
        /* ë‹¤í¬ ëª¨ë“œ select ê°•ì œ ì ìš© - ìµœìš°ì„  */
        [data-theme="dark"] select#subCategory,
        [data-theme="dark"] select#purpose,
        [data-theme="dark"] select#sampleName,
        [data-theme="dark"] .form-card .card-body select {
            -webkit-appearance: none !important;
            -moz-appearance: none !important;
            appearance: none !important;
            background-color: rgba(20, 83, 45, 0.95) !important;
            color: #86efac !important;
            border-color: rgba(34, 197, 94, 0.4) !important;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%2386efac' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='m6 9 6 6 6-6'/%3E%3C/svg%3E") !important;
            background-repeat: no-repeat !important;
            background-position: right 12px center !important;
            background-size: 16px !important;
            padding-right: 40px !important;
        }
        [data-theme="dark"] select#subCategory option,
        [data-theme="dark"] select#purpose option,
        [data-theme="dark"] select#sampleName option,
        [data-theme="dark"] .form-card .card-body select option {
            background-color: #14532d !important;
            color: #86efac !important;
        }
    </style>
</head>

<body class="soil-page">
    <!-- ë„¤ë¹„ê²Œì´ì…˜ ë°” -->
    <nav class="navbar soil-navbar">
        <!-- ë’¤ë¡œê°€ê¸° ë²„íŠ¼ -->
        <a href="../index.html" class="back-btn" title="ë©”ì¸ìœ¼ë¡œ">â†</a>
        <!-- ë¡œê³  ë° íŒŒíŠ¸ ì„ íƒ ë“œë¡­ë‹¤ìš´ -->
        <div class="navbar-brand">
            <div class="brand-dropdown-trigger">
                <span class="brand-icon">ğŸŒ±</span>
                <span class="brand-text">í† ì–‘</span>
                <span class="dropdown-arrow">â–¼</span>
            </div>
            <div class="brand-dropdown-menu">
                <div class="dropdown-header">ì‹œë£Œ ë¶„ì„ ë©”ë‰´</div>
                <a href="../soil/index.html" class="dropdown-item active">
                    <span class="item-icon">ğŸŒ±</span>
                    <span class="item-text">í† ì–‘ ë¶„ì„</span>
                </a>
                <a href="../water/index.html" class="dropdown-item">
                    <span class="item-icon">ğŸ’§</span>
                    <span class="item-text">ìˆ˜ì§ˆ ë¶„ì„</span>
                </a>
                <a href="../compost/index.html" class="dropdown-item">
                    <span class="item-icon">ğŸ„</span>
                    <span class="item-text">í‡´Â·ì•¡ë¹„ ì„±ë¶„ê²€ì‚¬</span>
                </a>
                <div class="dropdown-divider"></div>
                <a href="../pesticide/index.html" class="dropdown-item">
                    <span class="item-icon">ğŸ§ª</span>
                    <span class="item-text">ì”ë¥˜ë†ì•½ ê²€ì‚¬</span>
                </a>
                <a href="../heavy-metal/index.html" class="dropdown-item">
                    <span class="item-icon">âš—ï¸</span>
                    <span class="item-text">í† ì–‘ ì¤‘ê¸ˆì†</span>
                </a>
                <div class="dropdown-divider"></div>
                <a href="../label-print/index.html" class="dropdown-item">
                    <span class="item-icon">ğŸ·ï¸</span>
                    <span class="item-text">ë¼ë²¨ ì¸ì‡„</span>
                </a>
            </div>
        </div>

        <!-- ë©”ì¸ ë„¤ë¹„ê²Œì´ì…˜ -->
        <div class="navbar-nav">
            <button class="nav-btn active" data-view="form" title="ì‹œë£Œ ì ‘ìˆ˜">
                <span class="nav-btn-icon">âœï¸</span>
            </button>
            <button class="nav-btn" data-view="list" title="ì ‘ìˆ˜ ëª©ë¡">
                <span class="nav-btn-icon">ğŸ“Š</span>
            </button>
        </div>

        <div class="navbar-divider"></div>

        <!-- í¼ ì•¡ì…˜ -->
        <div class="navbar-actions">
            <button type="button" id="navResetBtn" class="action-btn-icon reset" title="ì´ˆê¸°í™”">
                <span>ğŸ”„</span>
            </button>
            <button type="button" id="navSubmitBtn" class="action-btn-icon submit" title="ì ‘ìˆ˜ ë“±ë¡">
                <span>âœ…</span>
            </button>
        </div>

        <div class="navbar-spacer"></div>

        <!-- ìœ í‹¸ë¦¬í‹° -->
        <div class="navbar-utils">
            <button type="button" id="exportBtn" class="util-btn" title="ì—‘ì…€ ë‚´ë³´ë‚´ê¸°">ğŸ“¥</button>
            <button type="button" id="saveJsonBtn" class="util-btn" title="JSON ì €ì¥">ğŸ’¾</button>
            <label for="loadJsonInput" class="util-btn" title="JSON ë¶ˆëŸ¬ì˜¤ê¸°">
                ğŸ“‚
                <input type="file" id="loadJsonInput" accept=".json" hidden>
            </label>
            <button type="button" id="migrateBtn" class="util-btn" title="í´ë¼ìš°ë“œ ë§ˆì´ê·¸ë ˆì´ì…˜">â˜ï¸</button>
        </div>

        <div class="navbar-divider"></div>

        <!-- ìë™ ì €ì¥ -->
        <div class="navbar-autosave">
            <label class="autosave-toggle" title="ìë™ì €ì¥">
                <input type="checkbox" id="autoSaveToggle">
                <span class="toggle-track"></span>
            </label>
            <button type="button" id="selectAutoSaveFolderBtn" class="autosave-folder-btn" title="ì €ì¥ í´ë” ë³€ê²½">
                ğŸ“
            </button>
            <span id="autoSaveStatus" class="autosave-status">
                <span class="status-indicator"></span>
            </span>
        </div>

        <div class="navbar-divider"></div>

        <!-- ë‹¤í¬ ëª¨ë“œ í† ê¸€ -->
        <div class="theme-toggle" id="themeToggleContainer">
            <span class="theme-icon sun">â˜€ï¸</span>
            <button class="theme-toggle-btn" id="themeToggleBtn" title="ë‹¤í¬ ëª¨ë“œ ì „í™˜">
            </button>
            <span class="theme-icon moon">ğŸŒ™</span>
        </div>
    </nav>

    <!-- ë©”ì¸ ì½˜í…ì¸  -->
    <main class="main-content">
        <!-- ì‹œë£Œ ì ‘ìˆ˜ í¼ ë·° -->
        <div id="formView" class="view active">

            <form id="sampleForm" class="sample-form">
                <div class="form-two-column">
                    <!-- ì™¼ìª½: ê¸°ë³¸ ì •ë³´ + ì‹œë£Œ ì •ë³´ -->
                    <div class="form-left-column">
                        <!-- ê¸°ë³¸ ì •ë³´ ì¹´ë“œ -->
                        <div class="form-card">
                            <div class="card-header">
                                <span class="card-icon">ğŸ‘¤</span>
                                <h3>ê¸°ë³¸ ì •ë³´</h3>
                                <div class="year-select-wrapper">
                                    <select id="yearSelect" class="year-select appearance-none">
                                        <option value="2025">2025ë…„</option>
                                        <option value="2026">2026ë…„</option>
                                        <option value="2027">2027ë…„</option>
                                        <option value="2028">2028ë…„</option>
                                        <option value="2029">2029ë…„</option>
                                        <option value="2030">2030ë…„</option>
                                    </select>
                                </div>
                                <div class="reception-method-group">
                                    <button type="button" class="reception-method-btn" data-method="ìš°í¸" title="ìš°í¸">
                                        <span class="method-icon">ğŸ“®</span>
                                    </button>
                                    <button type="button" class="reception-method-btn" data-method="ì´ë©”ì¼" title="ì´ë©”ì¼">
                                        <span class="method-icon">ğŸ“§</span>
                                    </button>
                                    <button type="button" class="reception-method-btn" data-method="íŒ©ìŠ¤" title="íŒ©ìŠ¤">
                                        <span class="method-icon">ğŸ“ </span>
                                    </button>
                                    <button type="button" class="reception-method-btn" data-method="ì§ì ‘ë°©ë¬¸" title="ì§ì ‘ë°©ë¬¸">
                                        <span class="method-icon">ğŸš¶</span>
                                    </button>
                                </div>
                                <input type="hidden" id="receptionMethod" name="receptionMethod" required>
                            </div>
                            <div class="card-body">
                                <div class="form-row">
                                    <div class="form-field">
                                        <label for="receptionNumber">ì ‘ìˆ˜ë²ˆí˜¸</label>
                                        <input type="text" id="receptionNumber" name="receptionNumber"
                                            placeholder="ìë™ ìƒì„±">
                                    </div>
                                    <div class="form-field">
                                        <label for="date">ì ‘ìˆ˜ì¼ì</label>
                                        <input type="date" id="date" name="date" required>
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-field">
                                        <label for="name">ì„±ëª… <span class="required">*</span></label>
                                        <input type="text" id="name" name="name" required placeholder="ë¯¼ì›ì¸ ì„±ëª…" autocomplete="name">
                                    </div>
                                    <div class="form-field">
                                        <label for="phoneNumber">ì „í™”ë²ˆí˜¸ <span class="required">*</span></label>
                                        <input type="tel" id="phoneNumber" name="phoneNumber" required
                                            placeholder="010-0000-0000" autocomplete="tel">
                                    </div>
                                </div>
                                <div class="form-row single">
                                    <div class="form-field full">
                                        <label for="addressPostcode">ì£¼ì†Œ</label>
                                        <div class="address-group">
                                            <div class="address-row">
                                                <input type="text" id="addressPostcode" name="addressPostcode" readonly
                                                    placeholder="ìš°í¸ë²ˆí˜¸" class="postcode-input" autocomplete="postal-code">
                                                <button type="button" id="searchAddressBtn" class="btn-search">
                                                    ğŸ” ì£¼ì†Œ ê²€ìƒ‰
                                                </button>
                                            </div>
                                            <input type="text" id="addressRoad" name="addressRoad" readonly
                                                placeholder="ë„ë¡œëª… ì£¼ì†Œ" autocomplete="street-address">
                                            <input type="text" id="addressDetail" name="addressDetail" placeholder="ìƒì„¸ ì£¼ì†Œ ì…ë ¥" autocomplete="address-line2">
                                        </div>
                                        <input type="hidden" id="address" name="address">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- ì‹œë£Œ ì •ë³´ ì¹´ë“œ -->
                        <div class="form-card">
                            <div class="card-header">
                                <span class="card-icon">ğŸŒ±</span>
                                <h3>í† ì–‘ ì‹œë£Œ ì •ë³´</h3>
                            </div>
                            <div class="card-body">
                                <div class="form-row">
                                    <div class="form-field">
                                        <label for="subCategory">êµ¬ë¶„</label>
                                        <select id="subCategory" name="subCategory">
                                            <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                                            <option value="ë…¼">ğŸŒ¾ ë…¼</option>
                                            <option value="ë°­">ğŸ¥¬ ë°­</option>
                                            <option value="ê³¼ìˆ˜">ğŸ ê³¼ìˆ˜</option>
                                            <option value="ì‹œì„¤">ğŸ  ì‹œì„¤</option>
                                            <option value="ì„ì•¼">ğŸŒ² ì„ì•¼</option>
                                            <option value="ì„±í† ">ğŸšœ ì„±í† </option>
                                        </select>
                                    </div>
                                    <div class="form-field">
                                        <label for="purpose">ëª©ì  (ìš©ë„) <span class="required">*</span></label>
                                        <select id="purpose" name="purpose" required>
                                            <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                                            <option value="ì¼ë°˜ì¬ë°°">ğŸŒ¾ ì¼ë°˜ì¬ë°°</option>
                                            <option value="ë¬´ë†ì•½">ğŸƒ ë¬´ë†ì•½</option>
                                            <option value="ìœ ê¸°">â™»ï¸ ìœ ê¸°</option>
                                            <option value="GAP">âœ… GAP</option>
                                            <option value="ì €íƒ„ì†Œ">ğŸŒ± ì €íƒ„ì†Œ</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-field full-width">
                                        <label for="note">ë¹„ê³ </label>
                                        <input type="text" id="note" name="note" placeholder="ì¶”ê°€ ë©”ëª¨ ì‚¬í•­ì„ ì…ë ¥í•˜ì„¸ìš”">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ì˜¤ë¥¸ìª½: í•„ì§€ ì •ë³´ -->
                    <div class="form-right-column">
                        <!-- í•„ì§€ ì •ë³´ ì¹´ë“œ -->
                        <div class="form-card">
                            <div class="card-header">
                                <span class="card-icon">ğŸ—ºï¸</span>
                                <h3>í•„ì§€ ì •ë³´</h3>
                                <button type="button" id="addParcelBtn" class="btn-add-small">+ í•„ì§€ ì¶”ê°€</button>
                            </div>
                            <div class="card-body">
                                <div class="info-banner">
                                    <span class="info-icon">ğŸ’¡</span>
                                    <span>ê°™ì€ í•„ì§€ì— ì—¬ëŸ¬ ì‹œë£Œ ì ‘ìˆ˜ ê°€ëŠ¥ (ë¹„ê³ ë¡œ êµ¬ë¶„)</span>
                                </div>
                                <div id="parcelsContainer" class="parcels-list">
                                    <!-- í•„ì§€ê°€ ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
                                </div>
                                <div id="emptyParcels" class="empty-parcels">
                                    <p>ë“±ë¡ëœ í•„ì§€ê°€ ì—†ìŠµë‹ˆë‹¤</p>
                                    <button type="button" class="btn-add-parcel-empty">+ ì²« ë²ˆì§¸ í•„ì§€ ì¶”ê°€</button>
                                </div>
                            </div>
                            <input type="hidden" id="parcelsData" name="parcelsData">
                        </div>
                    </div>
                </div>

            </form>
        </div>

        <!-- ì ‘ìˆ˜ ëª©ë¡ ë·° -->
        <div id="listView" class="view">
            <div class="view-header-top">
                <div class="header-left">
                    <h2 id="listViewTitle">í† ì–‘ ì ‘ìˆ˜ ëª©ë¡</h2>
                    <select id="listYearSelect" class="list-year-select appearance-none">
                        <option value="2025">2025ë…„</option>
                        <option value="2026">2026ë…„</option>
                        <option value="2027">2027ë…„</option>
                        <option value="2028">2028ë…„</option>
                        <option value="2029">2029ë…„</option>
                        <option value="2030">2030ë…„</option>
                    </select>
                    <select id="purposeFilter" class="purpose-filter appearance-none">
                        <option value="">ì „ì²´ ìš©ë„</option>
                        <option value="ì¼ë°˜ì¬ë°°">ğŸŒ¾ ì¼ë°˜ì¬ë°°</option>
                        <option value="ìœ ê¸°">â™»ï¸ ìœ ê¸°</option>
                        <option value="ë¬´ë†ì•½">ğŸƒ ë¬´ë†ì•½</option>
                        <option value="GAP">âœ… GAP</option>
                        <option value="ì €íƒ„ì†Œ">ğŸŒ± ì €íƒ„ì†Œ</option>
                    </select>
                    <select id="completedFilter" class="purpose-filter appearance-none">
                        <option value="">ì „ì²´ ìƒíƒœ</option>
                        <option value="incomplete">â¬œ ë¯¸ì™„ë£Œ</option>
                        <option value="completed">âœ… ì™„ë£Œ</option>
                    </select>
                    <span class="record-count" id="recordCount">0ê±´</span>
                </div>
                <div class="header-right">
                    <div class="view-toggle">
                        <button type="button" id="viewToggleBtn" class="btn-view-toggle" title="ì „ì²´ ë³´ê¸°/ê¸°ë³¸ ë³´ê¸°">
                            <span class="toggle-icon">ğŸ‘ï¸</span>
                            <span class="toggle-text">ì „ì²´ ë³´ê¸°</span>
                        </button>
                    </div>
                    <button type="button" id="btnStatistics" class="btn-statistics" title="í†µê³„">
                        ğŸ“Š í†µê³„
                    </button>
                    <button type="button" id="btnLabelPrint" class="btn-label-print" title="ì„ íƒí•œ í•­ëª© ë¼ë²¨ ì¸ì‡„">
                        ğŸ·ï¸ ë¼ë²¨ ì¸ì‡„
                    </button>
                    <button type="button" id="btnBulkDelete" class="btn-bulk-delete" title="ì„ íƒí•œ í•­ëª© ì¼ê´„ ì‚­ì œ">
                        ğŸ—‘ï¸ ì„ íƒ ì‚­ì œ
                    </button>
                    <button type="button" id="btnBulkMailDate" class="btn-bulk-mail" title="ì„ íƒí•œ í•­ëª© ìš°í¸ë°œì†¡ì¼ì ì¼ê´„ ì…ë ¥">
                        ğŸ“® ë°œì†¡ì¼ì
                    </button>
                    <button type="button" id="openSearchModalBtn" class="btn-search-open" title="ê²€ìƒ‰">
                        ğŸ” ê²€ìƒ‰
                    </button>
                </div>
            </div>

            <div class="table-wrapper">
                <table id="logTable" class="data-table">
                    <thead>
                        <tr>
                            <th class="col-checkbox"><input type="checkbox" id="selectAll" title="ì „ì²´ ì„ íƒ"></th>
                            <th class="col-complete">ì™„ë£Œ</th>
                            <th>ì ‘ìˆ˜ë²ˆí˜¸</th>
                            <th>ì ‘ìˆ˜ì¼ì</th>
                            <th>êµ¬ë¶„</th>
                            <th>ëª©ì (ìš©ë„)</th>
                            <th>ì„±ëª…</th>
                            <th class="col-zipcode">ìš°í¸ë²ˆí˜¸</th>
                            <th>ì£¼ì†Œ</th>
                            <th>í•„ì§€ ì£¼ì†Œ</th>
                            <th>ì‘ë¬¼ëª…</th>
                            <th>ë©´ì </th>
                            <th>ì „í™”ë²ˆí˜¸</th>
                            <th>ìˆ˜ë ¹ ë°©ë²•</th>
                            <th class="col-note">ë¹„ê³ </th>
                            <th class="col-mail-date">ë°œì†¡ì¼ì</th>
                            <th class="col-action">ê´€ë¦¬</th>
                        </tr>
                    </thead>
                    <tbody id="logTableBody">
                        <!-- ë°ì´í„°ê°€ ì—¬ê¸°ì— ì¶”ê°€ë©ë‹ˆë‹¤ -->
                    </tbody>
                </table>

                <!-- í˜ì´ì§€ë„¤ì´ì…˜ -->
                <div id="pagination" class="pagination-container">
                    <div class="pagination-info">
                        <span id="paginationInfo">0ê±´ ì¤‘ 0-0</span>
                        <select id="itemsPerPage" class="items-per-page">
                            <option value="50">50ê±´</option>
                            <option value="100" selected>100ê±´</option>
                            <option value="200">200ê±´</option>
                            <option value="500">500ê±´</option>
                        </select>
                    </div>
                    <div class="pagination-controls">
                        <button id="firstPage" class="pagination-btn" title="ì²˜ìŒ">Â«</button>
                        <button id="prevPage" class="pagination-btn" title="ì´ì „">â€¹</button>
                        <div id="pageNumbers" class="page-numbers"></div>
                        <button id="nextPage" class="pagination-btn" title="ë‹¤ìŒ">â€º</button>
                        <button id="lastPage" class="pagination-btn" title="ë§ˆì§€ë§‰">Â»</button>
                    </div>
                </div>

                <div id="emptyState" class="empty-state">
                    <div class="empty-icon">ğŸ“­</div>
                    <p>ë“±ë¡ëœ ì ‘ìˆ˜ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤</p>
                    <button type="button" class="btn-go-form">ìƒˆ ì‹œë£Œ ì ‘ìˆ˜í•˜ê¸°</button>
                </div>
            </div>
        </div>
    </main>

    <!-- ì‘ë¬¼ ê²€ìƒ‰ ëª¨ë‹¬ -->
    <div id="cropModal" class="modal hidden">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3>ğŸŒ¾ ì‘ë¬¼ ê²€ìƒ‰</h3>
                <button type="button" class="modal-close" id="closeCropModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="search-filter-row">
                    <input type="text" id="cropSearchInput" placeholder="ì‘ë¬¼ëª… ê²€ìƒ‰ (ì˜ˆ: ê³ ì¶”, ì‚¬ê³¼...)">
                    <select id="cropCategoryFilter">
                        <option value="ì „ì²´">ì „ì²´ ì¹´í…Œê³ ë¦¬</option>
                    </select>
                </div>
                <div class="results-info">
                    <span id="cropResultCount">0ê°œ ì‘ë¬¼</span>
                    <button type="button" id="clearCropSelection" class="btn-text-danger">ì„ íƒ ì´ˆê¸°í™”</button>
                </div>
                <div class="crop-list-wrapper">
                    <ul id="cropList" class="crop-list">
                        <!-- ì‘ë¬¼ ëª©ë¡ -->
                    </ul>
                </div>
                <div class="selected-section">
                    <h4>ì„ íƒëœ ì‘ë¬¼ <span id="selectedCropCount">0</span>ê°œ</h4>
                    <div id="selectedCropTags" class="tag-container">
                        <span class="no-selection">ì„ íƒëœ ì‘ë¬¼ì´ ì—†ìŠµë‹ˆë‹¤</span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" id="cancelCropSelection" class="btn-cancel">ì·¨ì†Œ</button>
                <button type="button" id="confirmCropSelection" class="btn-confirm">ì„ íƒ ì™„ë£Œ</button>
            </div>
        </div>
    </div>

    <!-- ì‘ë¬¼+ë©´ì  ì…ë ¥ ëª¨ë‹¬ -->
    <div id="cropAreaModal" class="modal hidden">
        <div class="modal-overlay"></div>
        <div class="modal-content modal-medium">
            <div class="modal-header">
                <h3>ğŸŒ± ì‘ë¬¼ ë° ë©´ì  ì…ë ¥</h3>
                <button type="button" class="modal-close" id="closeCropAreaModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="crop-area-list" id="cropAreaList">
                    <!-- ì‘ë¬¼+ë©´ì  ì…ë ¥ í•­ëª© -->
                </div>
                <button type="button" id="addCropAreaBtn" class="btn-add-row">+ ì‘ë¬¼ ì¶”ê°€</button>
            </div>
            <div class="modal-footer">
                <button type="button" id="cancelCropAreaBtn" class="btn-cancel">ì·¨ì†Œ</button>
                <button type="button" id="confirmCropAreaBtn" class="btn-confirm">í™•ì¸</button>
            </div>
        </div>
    </div>

    <!-- ì ‘ìˆ˜ ëª©ë¡ ê²€ìƒ‰ ëª¨ë‹¬ -->
    <div id="listSearchModal" class="modal hidden">
        <div class="modal-overlay"></div>
        <div class="modal-content modal-search">
            <div class="modal-header">
                <div class="modal-title">
                    <span class="material-icons-outlined">search</span>
                    <h3>ê²€ìƒ‰</h3>
                </div>
                <button type="button" class="modal-close" id="closeSearchModal">
                    <span class="material-icons-outlined">close</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="search-modal-form">
                    <div class="search-form-group">
                        <label for="searchDateFromInput">
                            <span class="material-icons-outlined label-icon-calendar">calendar_today</span>
                            ì ‘ìˆ˜ì¼ì (ë²”ìœ„)
                        </label>
                        <div class="search-input-row">
                            <div class="search-input-wrapper">
                                <input type="date" id="searchDateFromInput" class="search-input" title="ì‹œì‘ì¼">
                            </div>
                            <span class="date-range-separator">~</span>
                            <div class="search-input-wrapper">
                                <input type="date" id="searchDateToInput" class="search-input" title="ì¢…ë£Œì¼">
                            </div>
                            <button type="button" id="clearSearchDate" class="btn-clear-field">ì´ˆê¸°í™”</button>
                        </div>
                    </div>
                    <div class="search-form-group">
                        <label for="searchNameInput">
                            <span class="material-icons-outlined label-icon-calendar">person</span>
                            ì„±ëª…
                        </label>
                        <input type="text" id="searchNameInput" placeholder="ì„±ëª… ì…ë ¥..." class="search-input">
                    </div>
                    <div class="search-form-group">
                        <label for="searchReceptionFromInput">
                            <span class="material-icons-outlined label-icon-calendar">tag</span>
                            ì ‘ìˆ˜ë²ˆí˜¸ (ë²”ìœ„)
                        </label>
                        <div class="search-input-row">
                            <div class="search-input-wrapper">
                                <input type="text" id="searchReceptionFromInput" class="search-input" placeholder="ì‹œì‘ ë²ˆí˜¸">
                            </div>
                            <span class="date-range-separator">~</span>
                            <div class="search-input-wrapper">
                                <input type="text" id="searchReceptionToInput" class="search-input" placeholder="ì¢…ë£Œ ë²ˆí˜¸">
                            </div>
                            <button type="button" id="clearSearchReception" class="btn-clear-field">ì´ˆê¸°í™”</button>
                        </div>
                    </div>
                    <div class="search-form-group">
                        <label for="searchLotInput">
                            <span class="material-icons-outlined label-icon-calendar">location_on</span>
                            ì§€ë²ˆ ì£¼ì†Œ
                        </label>
                        <div class="search-input-row">
                            <div class="search-input-wrapper" style="flex: 1;">
                                <input type="text" id="searchLotInput" placeholder="ë¦¬ ì§€ë²ˆ (ì˜ˆ: ë¬¸ë‹¨ë¦¬ 123)" class="search-input">
                            </div>
                            <button type="button" id="clearSearchLot" class="btn-clear-field">ì´ˆê¸°í™”</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" id="resetSearchBtn" class="btn-reset">ì „ì²´ ì´ˆê¸°í™”</button>
                <button type="button" id="applySearchBtn" class="btn-search-apply">ê²€ìƒ‰</button>
            </div>
        </div>
    </div>

    <!-- ì£¼ì†Œ ê²€ìƒ‰ ëª¨ë‹¬ -->
    <div id="addressModal" class="modal hidden">
        <div class="modal-overlay"></div>
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h3>ğŸ“ ì£¼ì†Œ ê²€ìƒ‰</h3>
                <button type="button" class="modal-close" id="closeAddressModal">&times;</button>
            </div>
            <div class="modal-body">
                <div id="daumPostcodeContainer" class="postcode-container"></div>
            </div>
        </div>
    </div>

    <!-- ì§€ì—­ ì„ íƒ ëª¨ë‹¬ (ì¤‘ë³µ ë¦¬ ì´ë¦„) -->
    <div id="regionSelectionModal" class="modal hidden">
        <div class="modal-overlay"></div>
        <div class="modal-content modal-medium">
            <div class="modal-header">
                <h3>ğŸ—ºï¸ ì§€ì—­ ì„ íƒ</h3>
                <button type="button" class="modal-close" id="closeRegionModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="region-selection-info">
                    <p><strong id="duplicateVillageName"></strong>ì€(ëŠ”) ì—¬ëŸ¬ ì§€ì—­ì— ì¡´ì¬í•©ë‹ˆë‹¤.</p>
                    <p>í•´ë‹¹í•˜ëŠ” ì§€ì—­ì„ ì„ íƒí•´ì£¼ì„¸ìš”:</p>
                </div>
                <div class="region-options" id="regionOptions">
                    <!-- ì§€ì—­ ì˜µì…˜ì´ ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" id="cancelRegionSelection" class="btn-cancel">ì·¨ì†Œ</button>
            </div>
        </div>
    </div>

    <!-- ë“±ë¡ ê²°ê³¼ ëª¨ë‹¬ -->
    <div id="registrationResultModal" class="modal hidden">
        <div class="modal-overlay"></div>
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h3>ğŸ“‹ ë“±ë¡ ê²°ê³¼</h3>
                <button type="button" class="modal-close" id="closeRegistrationModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="result-table-wrapper">
                    <table class="result-table">
                        <tbody id="resultTableBody">
                            <!-- ë“±ë¡ëœ ë°ì´í„°ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" id="closeResultBtn" class="btn-cancel">ë‹«ê¸°</button>
                <button type="button" id="exportResultBtn" class="btn-confirm">ì—‘ì…€ë¡œ ë‚´ë³´ë‚´ê¸°</button>
            </div>
        </div>
    </div>

    <!-- í†µê³„ ëª¨ë‹¬ -->
    <div id="statisticsModal" class="modal hidden">
        <div class="modal-overlay"></div>
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h3>ğŸ“Š í† ì–‘ ì ‘ìˆ˜ í†µê³„</h3>
                <button type="button" class="modal-close" id="closeStatisticsModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="stats-container">
                    <!-- ìš”ì•½ ì¹´ë“œ -->
                    <div class="stats-summary">
                        <div class="stat-card total">
                            <div class="stat-icon">ğŸ“‹</div>
                            <div class="stat-info">
                                <span class="stat-value" id="statTotalCount">0</span>
                                <span class="stat-label">ì´ ì ‘ìˆ˜</span>
                            </div>
                        </div>
                        <div class="stat-card completed">
                            <div class="stat-icon">âœ…</div>
                            <div class="stat-info">
                                <span class="stat-value" id="statCompletedCount">0</span>
                                <span class="stat-label">ì™„ë£Œ</span>
                            </div>
                        </div>
                        <div class="stat-card pending">
                            <div class="stat-icon">â³</div>
                            <div class="stat-info">
                                <span class="stat-value" id="statPendingCount">0</span>
                                <span class="stat-label">ë¯¸ì™„ë£Œ</span>
                            </div>
                        </div>
                    </div>

                    <!-- ìƒì„¸ í†µê³„ -->
                    <div class="stats-details">
                        <!-- êµ¬ë¶„ë³„ í†µê³„ -->
                        <div class="stats-section">
                            <h4>ğŸï¸ êµ¬ë¶„ë³„</h4>
                            <div class="stats-chart" id="statsByCategory"></div>
                        </div>

                        <!-- ëª©ì (ìš©ë„)ë³„ í†µê³„ -->
                        <div class="stats-section">
                            <h4>ğŸ¯ ëª©ì (ìš©ë„)ë³„</h4>
                            <div class="stats-chart" id="statsByPurpose"></div>
                        </div>

                        <!-- ì›”ë³„ í†µê³„ -->
                        <div class="stats-section stats-section-full">
                            <h4>ğŸ“… ì›”ë³„ ì ‘ìˆ˜ í˜„í™©</h4>
                            <div class="stats-chart-monthly" id="statsByMonth"></div>
                            <div class="stats-quarterly" id="statsQuarterly"></div>
                        </div>

                        <!-- ìˆ˜ë ¹ ë°©ë²•ë³„ í†µê³„ -->
                        <div class="stats-section">
                            <h4>ğŸ“® ìˆ˜ë ¹ ë°©ë²•ë³„</h4>
                            <div class="stats-chart" id="statsByReceptionMethod"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" id="closeStatisticsBtn" class="btn-cancel">ë‹«ê¸°</button>
            </div>
        </div>
    </div>

    <!-- ìš°í¸ë°œì†¡ì¼ì ì…ë ¥ ëª¨ë‹¬ -->
    <div id="mailDateModal" class="modal hidden">
        <div class="modal-overlay"></div>
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h3>ğŸ“® ìš°í¸ë°œì†¡ì¼ì ì…ë ¥</h3>
                <button type="button" class="modal-close" id="closeMailDateModal">&times;</button>
            </div>
            <div class="modal-body">
                <p id="mailDateInfo" class="mail-date-info">ì„ íƒí•œ 0ê±´ì˜ ìš°í¸ë°œì†¡ì¼ìë¥¼ ì…ë ¥í•˜ì„¸ìš”.</p>
                <div class="form-field">
                    <label for="mailDateInput">ë°œì†¡ì¼ì</label>
                    <input type="date" id="mailDateInput" class="mail-date-input">
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" id="cancelMailDateBtn" class="btn-cancel">ì·¨ì†Œ</button>
                <button type="button" id="confirmMailDateBtn" class="btn-confirm">í™•ì¸</button>
            </div>
        </div>
    </div>

    <!-- í† ìŠ¤íŠ¸ ë©”ì‹œì§€ -->
    <div id="toastContainer" class="toast-container"></div>

    <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js"></script>
    <script src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
    <script src="../cropData.js"></script>
    <script src="../bonghwaData.js"></script>
    <!-- ê³µí†µ ëª¨ë“ˆ -->
    <!-- DOMPurify for XSS prevention -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/3.0.6/purify.min.js" integrity="sha384-cwS6YdhLI7XS60eoDiC+egV0qHp8zI+Cms46R0nbn8JrmoAzV9uFL60etMZhAnSu" crossorigin="anonymous"></script>
    <script src="../shared/sanitize.js"></script>
    <script src="../shared/constants.js"></script>
    <script src="../shared/file-api.js"></script>
    <script src="../shared/utils.js"></script>
    <script src="../shared/toast.js"></script>
    <script src="../shared/pagination.js"></script>
    <script src="../shared/address.js"></script>
    <script src="../shared/address-parser.js"></script>
    <script src="../shared/search-filter.js"></script>
    <script src="../shared/form-validator.js"></script>
    <script src="../shared/theme.js"></script>
    <script src="../shared/tooltip.js"></script>
    <!-- Firebase SDK (compat ë²„ì „ - Electron í˜¸í™˜) -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <!-- ë„¤íŠ¸ì›Œí¬ ì ‘ê·¼ ì œì–´ (Firebase ì´ˆê¸°í™” ì „ì— ë¡œë“œ) -->
    <script src="../shared/logger.js"></script>
    <script src="../shared/network-access.js"></script>
    <!-- Firebase ìŠ¤í¬ë¦½íŠ¸ -->
    <script src="../shared/firebase-config.js"></script>
    <script src="../shared/firestore-db.js"></script>
    <script src="../shared/sync-utils.js"></script>
    <script src="soil-script.js"></script>
</body>

</html>
