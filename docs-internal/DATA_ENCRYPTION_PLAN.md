# λ°μ΄ν„° μ•”νΈν™” κµ¬ν„ κ³„νμ„

> μ‘μ„±μΌ: 2026-02-04
> ν”„λ΅μ νΈ: μ‹λ£μ ‘μλ€μ¥ (Sample Log)
> λ²„μ „: 1.0

---

## λ©μ°¨

1. [κ°μ”](#1-κ°μ”)
2. [ν„μ¬ μ‹μ¤ν… κµ¬μ΅°](#2-ν„μ¬-μ‹μ¤ν…-κµ¬μ΅°)
3. [κΈ°μ  μ¤νƒ](#3-κΈ°μ -μ¤νƒ)
4. [Firebase λ°μ΄ν„° μ•”νΈν™”](#4-firebase-λ°μ΄ν„°-μ•”νΈν™”)
5. [λ΅μ»¬ λ°±μ—… λ°μ΄ν„° μ•”νΈν™”](#5-λ΅μ»¬-λ°±μ—…-λ°μ΄ν„°-μ•”νΈν™”)
6. [ν‚¤ κ΄€λ¦¬ μ „λµ](#6-ν‚¤-κ΄€λ¦¬-μ „λµ)
7. [κµ¬ν„ νƒμ¤ν¬ κ³„ν](#7-κµ¬ν„-νƒμ¤ν¬-κ³„ν)
8. [μ½”λ“ μμ‹](#8-μ½”λ“-μμ‹)
9. [λ³΄μ• κ³ λ ¤μ‚¬ν•­](#9-λ³΄μ•-κ³ λ ¤μ‚¬ν•­)
10. [λ΅¤λ°± κ³„ν](#10-λ΅¤λ°±-κ³„ν)

---

## 1. κ°μ”

### 1.1 λ©μ 

- Firebase Firestoreμ— μ €μ¥λλ” λ―Όκ°ν• κ°μΈμ •λ³΄ λ³΄νΈ
- λ΅μ»¬ λ°±μ—… JSON νμΌμ λ¬΄λ‹¨ μ—΄λ λ°©μ§€
- λ°μ΄ν„° μ μ¶ μ‹μ—λ„ μ •λ³΄ λ³΄νΈ κ°€λ¥ν• κµ¬μ΅° κµ¬μ¶•

### 1.2 λ²”μ„

| λ€μƒ | μ•”νΈν™” λ²”μ„ | μ°μ„ μμ„ |
|------|------------|---------|
| Firebase Firestore | λ―Όκ° ν•„λ“ μ„ νƒμ  μ•”νΈν™” | Phase 1 |
| λ΅μ»¬ λ°±μ—… νμΌ | μ „μ²΄ λ°μ΄ν„° μ•”νΈν™” | Phase 2 |
| localStorage | μ•”νΈν™” ν•μ§€ μ•μ (μΊμ‹ μ©λ„) | - |

### 1.3 λ―Όκ° μ •λ³΄ μ •μ

```
- μ„±λ… (name)
- μ—°λ½μ² (phone)
- μ£Όμ† (address)
- μƒλ…„μ›”μΌ (birthDate)
- λ²•μΈλ²νΈ (corpNumber)
```

---

## 2. ν„μ¬ μ‹μ¤ν… κµ¬μ΅°

### 2.1 λ°μ΄ν„° νλ¦„

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚                        ν„μ¬ λ°μ΄ν„° νλ¦„                              β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚                                                                     β”‚
β”‚  [μ‚¬μ©μ μ…λ ¥]                                                       β”‚
β”‚       β†“                                                             β”‚
β”‚  [sampleLogs λ°°μ—΄] β†β”€β”€β†’ [localStorage] (μΊμ‹)                       β”‚
β”‚       β†“                                                             β”‚
β”‚  [Firebase Firestore] (Primary - ν‰λ¬Έ μ €μ¥)                         β”‚
β”‚       β†“                                                             β”‚
β”‚  [λ΅μ»¬ JSON νμΌ] (Backup - ν‰λ¬Έ μ €μ¥)                               β”‚
β”‚                                                                     β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

### 2.2 μ €μ¥ μ„μΉλ³„ ν„ν™©

| μ €μ¥ μ„μΉ | νμΌ/κ²½λ΅ | ν„μ¬ μƒνƒ | μ ‘κ·Ό κ°€λ¥μ„± |
|----------|----------|----------|------------|
| Firebase | `samples/{type}/{year}/data` | ν‰λ¬Έ | Firebase μ½μ†” |
| localStorage | `sampleLogs_{type}_{year}` | ν‰λ¬Έ | λΈλΌμ°μ € κ°λ°μλ„κµ¬ |
| λ΅μ»¬ νμΌ | `auto-save-{type}-{year}.json` | ν‰λ¬Έ | νμΌ νƒμƒ‰κΈ° |

---

## 3. κΈ°μ  μ¤νƒ

### 3.1 μ•”νΈν™” λΌμ΄λΈλ¬λ¦¬

#### CryptoJS (κ¶μ¥)

```
λΌμ΄λΈλ¬λ¦¬: crypto-js
λ²„μ „: 4.2.0
CDN: https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.2.0/crypto-js.min.js
ν¬κΈ°: ~70KB (minified)
```

**μ¥μ :**
- μμ JavaScript, λΈλΌμ°μ €/Node.js λ¨λ‘ μ§€μ›
- Electronκ³Ό μ›Ή ν™κ²½ λ™μΌ μ½”λ“ μ‚¬μ© κ°€λ¥
- AES-256 μ§€μ›
- λ„λ¦¬ μ‚¬μ©λμ–΄ κ²€μ¦λ¨

**μ§€μ› μ•κ³ λ¦¬μ¦:**
- AES (128/192/256)
- DES / Triple DES
- SHA-1, SHA-256, SHA-512
- HMAC
- PBKDF2

#### Web Crypto API (λ€μ•)

```
λΈλΌμ°μ € λ‚΄μ¥ API
λ³„λ„ λΌμ΄λΈλ¬λ¦¬ λ¶ν•„μ”
```

**μ¥μ :**
- λ„¤μ΄ν‹°λΈ μ„±λ¥
- λ³„λ„ μμ΅΄μ„± μ—†μ

**λ‹¨μ :**
- λΉ„λ™κΈ° API (Promise κΈ°λ°)
- μ½”λ“ λ³µμ΅λ„ μ¦κ°€

### 3.2 μ„ νƒ: CryptoJS

| ν•­λ© | μ„ νƒ |
|------|------|
| λΌμ΄λΈλ¬λ¦¬ | CryptoJS 4.2.0 |
| μ•κ³ λ¦¬μ¦ | AES-256-CBC |
| ν‚¤ μ λ„ | PBKDF2 (100,000 iterations) |
| μΈμ½”λ”© | Base64 |

---

## 4. Firebase λ°μ΄ν„° μ•”νΈν™”

### 4.1 μ•”νΈν™” μ „λµ: μ„ νƒμ  ν•„λ“ μ•”νΈν™”

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚  Firebase μ €μ¥ κµ¬μ΅°                                                  β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚                                                                     β”‚
β”‚  {                                                                  β”‚
β”‚    "id": "soil-2026-001",           // ν‰λ¬Έ (κ²€μƒ‰/μ •λ ¬μ©)           β”‚
β”‚    "receptionNumber": "2026-001",   // ν‰λ¬Έ (κ²€μƒ‰μ©)                β”‚
β”‚    "date": "2026-02-04",            // ν‰λ¬Έ (κ²€μƒ‰/μ •λ ¬μ©)           β”‚
β”‚    "purpose": "λ…Ό",                 // ν‰λ¬Έ (ν•„ν„°μ©)                β”‚
β”‚    "isCompleted": false,            // ν‰λ¬Έ (ν•„ν„°μ©)                β”‚
β”‚    "_encrypted": {                  // μ•”νΈν™”λ λ―Όκ° μ •λ³΄           β”‚
β”‚      "name": "U2FsdGVkX1...",                                       β”‚
β”‚      "phone": "U2FsdGVkX1...",                                      β”‚
β”‚      "address": "U2FsdGVkX1...",                                    β”‚
β”‚      "birthDate": "U2FsdGVkX1..."                                   β”‚
β”‚    }                                                                β”‚
β”‚  }                                                                  β”‚
β”‚                                                                     β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

### 4.2 μ•”νΈν™” λ€μƒ ν•„λ“

| ν•„λ“λ… | μ•”νΈν™” | μ΄μ  |
|--------|--------|------|
| id | β | λ¬Έμ„ μ‹λ³„μ |
| receptionNumber | β | κ²€μƒ‰ ν•„μ” |
| date | β | μ •λ ¬/κ²€μƒ‰ ν•„μ” |
| purpose | β | ν•„ν„° ν•„μ” |
| name | β… | κ°μΈμ •λ³΄ |
| phone | β… | κ°μΈμ •λ³΄ |
| address | β… | κ°μΈμ •λ³΄ |
| birthDate | β… | κ°μΈμ •λ³΄ |
| corpNumber | β… | λ²•μΈμ •λ³΄ |
| parcels | β… | μ£Όμ† ν¬ν•¨ |
| note | β οΈ | μ„ νƒμ  (λ‚΄μ©μ— λ”°λΌ) |

### 4.3 λ°μ΄ν„° νλ¦„

```
[μ €μ¥ μ‹]
sampleLog β†’ λ―Όκ° ν•„λ“ μ¶”μ¶ β†’ AES μ•”νΈν™” β†’ _encrypted κ°μ²΄μ— μ €μ¥ β†’ Firebase μ—…λ΅λ“

[λ΅λ“ μ‹]
Firebase λ‹¤μ΄λ΅λ“ β†’ _encrypted λ³µνΈν™” β†’ μ›λ³Έ κ°μ²΄ λ³µμ› β†’ sampleLogsμ— μ €μ¥
```

---

## 5. λ΅μ»¬ λ°±μ—… λ°μ΄ν„° μ•”νΈν™”

### 5.1 μ•”νΈν™” μ „λµ: μ „μ²΄ νμΌ μ•”νΈν™”

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚  λ΅μ»¬ λ°±μ—… μ €μ¥ νλ¦„                                                 β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚                                                                     β”‚
β”‚  sampleLogs (λ°°μ—΄)                                                  β”‚
β”‚       β†“                                                             β”‚
β”‚  JSON.stringify() β†’ ν‰λ¬Έ JSON λ¬Έμμ—΄                                β”‚
β”‚       β†“                                                             β”‚
β”‚  AES.encrypt() β†’ μ•”νΈν™”λ λ¬Έμμ—΄ (Base64)                           β”‚
β”‚       β†“                                                             β”‚
β”‚  νμΌ μ €μ¥: backup-{type}-{year}.enc                                β”‚
β”‚                                                                     β”‚
β”‚  νμΌ λ‚΄μ© μμ‹:                                                    β”‚
β”‚  U2FsdGVkX19abc123def456ghi789jkl012mno345pqr678stu901vwx234...    β”‚
β”‚                                                                     β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

### 5.2 νμΌ ν•μ‹ λ³€κ²½

| ν•­λ© | ν„μ¬ | λ³€κ²½ ν›„ |
|------|------|--------|
| νμΌλ… | `auto-save-{type}-{year}.json` | `backup-{type}-{year}.enc` |
| ν™•μ¥μ | `.json` | `.enc` |
| λ‚΄μ© | JSON (ν‰λ¬Έ) | Base64 (μ•”νΈν™”) |
| μ—΄λ | ν…μ¤νΈ μ—λ””ν„°λ΅ κ°€λ¥ | λ¶κ°€λ¥ |

### 5.3 λ³µκµ¬ ν”„λ΅μ„Έμ¤

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚  λ³µκµ¬ μ‹λ‚λ¦¬μ¤                                                       β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚                                                                     β”‚
β”‚  1. μ‚¬μ©μκ°€ "λ°±μ—…μ—μ„ λ³µκµ¬" ν΄λ¦­                                    β”‚
β”‚  2. νμΌ μ„ νƒ λ‹¤μ΄μ–Όλ΅κ·Έ (.enc νμΌ)                                 β”‚
β”‚  3. νμΌ μ½κΈ° β†’ μ•”νΈν™”λ λ¬Έμμ—΄                                      β”‚
β”‚  4. λ³µνΈν™” ν‚¤ μ…λ ¥ (λλ” μλ™)                                       β”‚
β”‚  5. AES.decrypt() β†’ ν‰λ¬Έ JSON                                       β”‚
β”‚  6. JSON.parse() β†’ sampleLogs λ°°μ—΄                                  β”‚
β”‚  7. λ°μ΄ν„° κ²€μ¦ (μ¤ν‚¤λ§ μ²΄ν¬)                                        β”‚
β”‚  8. localStorageμ— μ €μ¥                                             β”‚
β”‚  9. (μ„ νƒ) Firebaseμ— μ—…λ΅λ“                                        β”‚
β”‚                                                                     β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

---

## 6. ν‚¤ κ΄€λ¦¬ μ „λµ

### 6.1 μµμ… λΉ„κµ

| λ°©μ‹ | λ³΄μ•μ„± | μ‚¬μ©μ„± | λ³µκµ¬ | μ΄λ™μ„± | κ¶μ¥ |
|------|--------|--------|------|--------|------|
| ν•λ“μ½”λ”© | β λ‚®μ | β… μΆ‹μ | β… ν•­μƒ κ°€λ¥ | β… μΆ‹μ | β |
| ν™κ²½ λ³€μ | β οΈ μ¤‘κ°„ | β… μΆ‹μ | β… ν•­μƒ κ°€λ¥ | β οΈ μ„¤μ • ν•„μ” | β οΈ |
| μ‚¬μ©μ λΉ„λ°€λ²νΈ | β οΈ μ¤‘κ°„ | β οΈ μ…λ ¥ ν•„μ” | β οΈ κΈ°μ–µ ν•„μ” | β… μΆ‹μ | β οΈ |
| **ν‚¤ νμΌ** | β… λ†’μ | β… μΆ‹μ | β οΈ νμΌ ν•„μ” | β οΈ νμΌ μ΄λ™ | β… κ¶μ¥ |
| **λΉ„λ°€λ²νΈ + ν‚¤ νμΌ** | β…β… λ§¤μ° λ†’μ | β οΈ λ³µμ΅ | β λ‘ λ‹¤ ν•„μ” | β οΈ | β…β… μµκ³  λ³΄μ• |
| Firebase UID κΈ°λ° | β οΈ μ¤‘κ°„ | β… μΆ‹μ | β… λ΅κ·ΈμΈ | β… μΆ‹μ | β… Firebaseμ© |
| Electron safeStorage | β… λ†’μ | β… μΆ‹μ | β PC μΆ…μ† | β λ¶κ°€ | β… Electronμ© |

### 6.2 ν‚¤ νμΌ λ°©μ‹ (κ¶μ¥)

#### 6.2.1 κ°λ…

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚  ν‚¤ νμΌ λ°©μ‹                                                        β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚                                                                     β”‚
β”‚  μ•”νΈν™” ν‚¤ = ν‚¤ νμΌ λ‚΄μ©μ SHA-256 ν•΄μ‹                             β”‚
β”‚                                                                     β”‚
β”‚  [ν‚¤ νμΌ] β”€β”€β†’ SHA-256 ν•΄μ‹ β”€β”€β†’ μ•”νΈν™” ν‚¤ (256λΉ„νΈ)                 β”‚
β”‚                                                                     β”‚
β”‚  μμ‹: sample-log.key (32λ°”μ΄νΈ λλ¤ λ°μ΄ν„°)                         β”‚
β”‚        λλ” μ‚¬μ©μκ°€ μ§€μ •ν• μ•„λ¬΄ νμΌ (μ΄λ―Έμ§€, λ¬Έμ„ λ“±)               β”‚
β”‚                                                                     β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

#### 6.2.2 ν‚¤ νμΌμ μ¥λ‹¨μ 

**μ¥μ :**

| ν•­λ© | μ„¤λ… |
|------|------|
| **λ†’μ€ μ—”νΈλ΅ν”Ό** | 256λΉ„νΈ λλ¤ ν‚¤ (λΉ„λ°€λ²νΈλ³΄λ‹¤ κ°•λ ¥) |
| **μ…λ ¥ λ¶ν•„μ”** | μ•± μ‹μ‘ μ‹ λΉ„λ°€λ²νΈ μ…λ ¥ μ—†μ |
| **λ³µμ‚¬/λ°±μ—… μ©μ΄** | USB, ν΄λΌμ°λ“ λ“±μ— λ³„λ„ λ³΄κ΄€ κ°€λ¥ |
| **λ¬΄μ°¨λ³„ λ€μ… λ¶κ°€** | ν‚¤ κ³µκ°„μ΄ λ§¤μ° νΌ (2^256) |

**λ‹¨μ :**

| ν•­λ© | μ„¤λ… |
|------|------|
| **νμΌ λ¶„μ‹¤ μ„ν—** | ν‚¤ νμΌ μ—†μΌλ©΄ λ³µνΈν™” λ¶κ°€ |
| **νμΌ μ μ¶ μ„ν—** | ν‚¤ νμΌ λ…Έμ¶ μ‹ λ³΄μ• λ¬΄λ ¥ν™” |
| **PC μ΄λ™ μ‹ λ²κ±°λ΅μ›€** | ν‚¤ νμΌλ„ ν•¨κ» μ΄λ™ ν•„μ” |
| **μ›Ή λ²„μ „ μ ν•** | λΈλΌμ°μ €μ—μ„ λ΅μ»¬ νμΌ μ ‘κ·Ό μ ν• |

#### 6.2.3 ν‚¤ νμΌ μ ν•

| μ ν• | μ„¤λ… | λ³΄μ•μ„± |
|------|------|--------|
| **μ „μ© ν‚¤ νμΌ** | μ•±μ΄ μƒμ„±ν• λλ¤ λ°”μ΄λ„λ¦¬ νμΌ (.key) | β… μµκ³  |
| **μ„μ νμΌ** | μ‚¬μ©μ μ§€μ • νμΌ (μ΄λ―Έμ§€, λ¬Έμ„ λ“±) | β οΈ μμΈ΅ κ°€λ¥μ„± |
| **λ³µν•© ν‚¤** | λΉ„λ°€λ²νΈ + ν‚¤ νμΌ μ΅°ν•© | β…β… μµκ³  |

#### 6.2.4 ν‚¤ νμΌ μ €μ¥ μ„μΉ μµμ…

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚  ν‚¤ νμΌ μ €μ¥ μ„μΉ                                                   β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚                                                                     β”‚
β”‚  [μµμ… 1] μ•± λ°μ΄ν„° ν΄λ” (κΈ°λ³Έ)                                      β”‚
β”‚    μ„μΉ: %APPDATA%/μ‹λ£μ ‘μλ€μ¥/sample-log.key                       β”‚
β”‚    μ¥μ : μλ™ λ΅λ“, μ‚¬μ©μ μ΅°μ‘ λ¶ν•„μ”                               β”‚
β”‚    λ‹¨μ : μ•± μ‚­μ  μ‹ ν•¨κ» μ‚­μ λ  μ μμ                              β”‚
β”‚                                                                     β”‚
β”‚  [μµμ… 2] μ‚¬μ©μ μ§€μ • μ„μΉ                                           β”‚
β”‚    μ„μΉ: USB, μ™Έμ¥ν•λ“, ν΄λΌμ°λ“ λ™κΈ°ν™” ν΄λ” λ“±                      β”‚
β”‚    μ¥μ : λ³„λ„ λ³΄κ΄€μΌλ΅ λ³΄μ• κ°•ν™”                                     β”‚
β”‚    λ‹¨μ : μ•± μ‹μ‘ μ‹ κ²½λ΅ μ§€μ • ν•„μ”                                   β”‚
β”‚                                                                     β”‚
β”‚  [μµμ… 3] USB μ „μ© (λ¶„λ¦¬ λ³΄κ΄€)                                       β”‚
β”‚    μ„μΉ: USB λ“λΌμ΄λΈ                                                β”‚
β”‚    μ¥μ : λ¬Όλ¦¬μ  λ¶„λ¦¬λ΅ μµκ³  λ³΄μ•                                     β”‚
β”‚    λ‹¨μ : USB μ—°κ²° ν•„μ”, λ¶„μ‹¤ μ„ν—                                    β”‚
β”‚                                                                     β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

#### 6.2.5 ν‚¤ νμΌ κµ¬ν„ μ½”λ“

```javascript
/**
 * ν‚¤ νμΌ μƒμ„± (256λΉ„νΈ λλ¤)
 */
async function generateKeyFile() {
    // 32λ°”μ΄νΈ (256λΉ„νΈ) λλ¤ λ°μ΄ν„° μƒμ„±
    const keyData = crypto.getRandomValues(new Uint8Array(32));

    // Base64λ΅ μΈμ½”λ”©ν•μ—¬ μ €μ¥
    const keyBase64 = btoa(String.fromCharCode(...keyData));

    // νμΌ μ €μ¥ (Electron)
    const result = await window.electronAPI.saveFileDialog({
        title: 'μ•”νΈν™” ν‚¤ νμΌ μ €μ¥',
        defaultPath: 'sample-log.key',
        filters: [{ name: 'Key File', extensions: ['key'] }]
    });

    if (result.filePath) {
        await window.electronAPI.writeFile(result.filePath, keyBase64);
        return result.filePath;
    }
    return null;
}

/**
 * ν‚¤ νμΌμ—μ„ μ•”νΈν™” ν‚¤ μ λ„
 */
async function deriveKeyFromFile(keyFilePath) {
    // νμΌ μ½κΈ°
    const result = await window.electronAPI.readFile(keyFilePath);
    if (!result.success) return null;

    // SHA-256 ν•΄μ‹λ΅ 256λΉ„νΈ ν‚¤ μƒμ„±
    const hash = CryptoJS.SHA256(result.content);
    return hash.toString();
}

/**
 * λ³µν•© ν‚¤ μƒμ„± (λΉ„λ°€λ²νΈ + ν‚¤ νμΌ)
 */
async function deriveCompositeKey(password, keyFilePath) {
    // ν‚¤ νμΌ ν•΄μ‹
    const fileKey = await deriveKeyFromFile(keyFilePath);
    if (!fileKey) return null;

    // λΉ„λ°€λ²νΈ + ν‚¤ νμΌ ν•΄μ‹ κ²°ν•©
    const combined = password + fileKey;

    // PBKDF2λ΅ μµμΆ… ν‚¤ μ λ„
    return CryptoJS.PBKDF2(combined, 'sample-log-salt', {
        keySize: 256 / 32,
        iterations: 100000
    }).toString();
}
```

### 6.3 κ¶μ¥ ν‚¤ κ΄€λ¦¬ κµ¬μ΅°

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚  κ¶μ¥: ν‚¤ νμΌ + μ„ νƒμ  λΉ„λ°€λ²νΈ                                     β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚                                                                     β”‚
β”‚  [κΈ°λ³Έ λ¨λ“] ν‚¤ νμΌλ§ μ‚¬μ©                                          β”‚
β”‚    - μ²« μ‹¤ν–‰ μ‹ ν‚¤ νμΌ μλ™ μƒμ„± (μ•± λ°μ΄ν„° ν΄λ”)                   β”‚
β”‚    - μ‚¬μ©μ μ…λ ¥ μ—†μ΄ μλ™ μ•”νΈν™”/λ³µνΈν™”                             β”‚
β”‚    - ν‚¤ νμΌ λ°±μ—… μ•λ‚΄ ν‘μ‹                                          β”‚
β”‚                                                                     β”‚
β”‚  [κ°•ν™” λ¨λ“] ν‚¤ νμΌ + λΉ„λ°€λ²νΈ (μ„ νƒ)                               β”‚
β”‚    - μ„¤μ •μ—μ„ "μ¶”κ°€ λΉ„λ°€λ²νΈ" ν™μ„±ν™”                                 β”‚
β”‚    - μ•± μ‹μ‘ μ‹ λΉ„λ°€λ²νΈ μ…λ ¥ ν•„μ”                                   β”‚
β”‚    - ν‚¤ νμΌ μ μ¶ μ‹μ—λ„ λ³΄νΈ                                        β”‚
β”‚                                                                     β”‚
β”‚  [λ³µκµ¬ λ¨λ“] ν‚¤ νμΌ μ¬μ§€μ •                                          β”‚
β”‚    - ν‚¤ νμΌ κ²½λ΅ λ³€κ²½ κ°€λ¥                                          β”‚
β”‚    - λ‹¤λ¥Έ PCλ΅ μ΄λ™ μ‹ ν‚¤ νμΌ μ§€μ •                                  β”‚
β”‚                                                                     β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚  ν‚¤ κ΄€λ¦¬ κµ¬μ΅° (μƒμ„Έ)                                                 β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚                                                                     β”‚
β”‚  [λ΅μ»¬ λ°±μ—… μ•”νΈν™” ν‚¤] β† ν‚¤ νμΌ λ°©μ‹ (κ¶μ¥)                         β”‚
β”‚    - μƒμ„±: μ•± μ²« μ‹¤ν–‰ μ‹ μλ™ μƒμ„± (32λ°”μ΄νΈ λλ¤)                   β”‚
β”‚    - μ €μ¥: μ•± λ°μ΄ν„° ν΄λ” (sample-log.key)                           β”‚
β”‚    - μ λ„: SHA-256 ν•΄μ‹ β†’ 256λΉ„νΈ ν‚¤                                β”‚
β”‚    - νΉμ§•: μ…λ ¥ μ—†μ΄ μλ™ λ™μ‘, ν‚¤ νμΌ λ°±μ—… ν•„μ”                    β”‚
β”‚                                                                     β”‚
β”‚  [Firebase μ•”νΈν™” ν‚¤] β† UID κΈ°λ° (κΈ°μ΅΄ μ μ§€)                         β”‚
β”‚    - μƒμ„±: Firebase User UID + App Secret                           β”‚
β”‚    - μ €μ¥: λ©”λ¨λ¦¬ (μ„Έμ… λ™μ•λ§ μ μ§€)                                 β”‚
β”‚    - νΉμ§•: μ‚¬μ©μλ³„ κ³ μ  ν‚¤, λ΅κ·ΈμΈ ν•„μ”                             β”‚
β”‚                                                                     β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

### 6.4 ν‚¤ νμΌ κ΄€λ¦¬ UI

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚  μ„¤μ • > λ³΄μ•                                                         β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚                                                                     β”‚
β”‚  π” μ•”νΈν™” μ„¤μ •                                                      β”‚
β”‚  β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€                   β”‚
β”‚                                                                     β”‚
β”‚  ν‚¤ νμΌ μ„μΉ:                                                       β”‚
β”‚  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β”β”€β”€β”€β”€β”€β”€β”€β”€β”            β”‚
β”‚  β”‚ C:\Users\xxx\AppData\sample-log.key     β”‚ β”‚ λ³€κ²½...β”‚            β”‚
β”‚  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β””β”€β”€β”€β”€β”€β”€β”€β”€β”            β”‚
β”‚                                                                     β”‚
β”‚  β‘ λ°±μ—… μ•”νΈν™” ν™μ„±ν™”                                               β”‚
β”‚  β μ¶”κ°€ λΉ„λ°€λ²νΈ μ‚¬μ© (μ„ νƒ)                                        β”‚
β”‚                                                                     β”‚
β”‚  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”                             β”‚
β”‚  β”‚ π”‘ ν‚¤ νμΌ λ°±μ—… β”‚  β”‚ π”„ ν‚¤ νμΌ μ¬μƒμ„±β”‚                            β”‚
β”‚  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”                             β”‚
β”‚                                                                     β”‚
β”‚  β οΈ ν‚¤ νμΌμ„ λ¶„μ‹¤ν•λ©΄ λ°±μ—… λ°μ΄ν„°λ¥Ό λ³µκµ¬ν•  μ μ—†μµλ‹λ‹¤.             β”‚
β”‚     USBλ‚ ν΄λΌμ°λ“μ— ν‚¤ νμΌμ„ λ°±μ—…ν•΄ λ‘μ„Έμ”.                        β”‚
β”‚                                                                     β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

### 6.5 ν‚¤ μ λ„ ν•¨μ (PBKDF2)

```javascript
// λΉ„λ°€λ²νΈλ΅λ¶€ν„° μ•”νΈν™” ν‚¤ μ λ„ (λΉ„λ°€λ²νΈ λ°©μ‹ μ‚¬μ© μ‹)
function deriveKeyFromPassword(password, salt) {
    return CryptoJS.PBKDF2(password, salt, {
        keySize: 256 / 32,      // 256λΉ„νΈ ν‚¤
        iterations: 100000,      // λ°λ³µ νμ (λ³΄μ•μ„±)
        hasher: CryptoJS.algo.SHA256
    });
}

// ν‚¤ νμΌμ—μ„ μ•”νΈν™” ν‚¤ μ λ„ (ν‚¤ νμΌ λ°©μ‹ μ‚¬μ© μ‹)
function deriveKeyFromFile(fileContent) {
    return CryptoJS.SHA256(fileContent).toString();
}
```

### 6.6 ν‚¤ νμΌ μƒλ…μ£ΌκΈ°

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚  ν‚¤ νμΌ μƒλ…μ£ΌκΈ°                                                    β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚                                                                     β”‚
β”‚  [1. μƒμ„±]                                                          β”‚
β”‚    μ•± μ²« μ‹¤ν–‰ β†’ ν‚¤ νμΌ μ΅΄μ¬ ν™•μΈ β†’ μ—†μΌλ©΄ μλ™ μƒμ„±                 β”‚
β”‚    β†’ λ°±μ—… μ•λ‚΄ νμ—… ν‘μ‹                                             β”‚
β”‚                                                                     β”‚
β”‚  [2. μ‚¬μ©]                                                          β”‚
β”‚    μ•± μ‹μ‘ β†’ ν‚¤ νμΌ λ΅λ“ β†’ λ©”λ¨λ¦¬μ— ν‚¤ μ μ§€                         β”‚
β”‚    β†’ μ•”νΈν™”/λ³µνΈν™” μ‹ μ‚¬μ©                                           β”‚
β”‚                                                                     β”‚
β”‚  [3. λ°±μ—…]                                                          β”‚
β”‚    μ‚¬μ©μ μ”μ²­ μ‹ β†’ ν‚¤ νμΌμ„ λ‹¤λ¥Έ μ„μΉμ— λ³µμ‚¬                       β”‚
β”‚    β†’ USB, ν΄λΌμ°λ“ λ“±μ— λ³΄κ΄€ κ¶μ¥                                    β”‚
β”‚                                                                     β”‚
β”‚  [4. λ³µκµ¬]                                                          β”‚
β”‚    μƒ PC λλ” μ•± μ¬μ„¤μΉ β†’ ν‚¤ νμΌ μ„μΉ μ§€μ •                          β”‚
β”‚    β†’ κΈ°μ΅΄ λ°±μ—… λ°μ΄ν„° λ³µνΈν™” κ°€λ¥                                    β”‚
β”‚                                                                     β”‚
β”‚  [5. μ¬μƒμ„±]                                                        β”‚
β”‚    μ‚¬μ©μ μ”μ²­ μ‹ β†’ μƒ ν‚¤ νμΌ μƒμ„±                                  β”‚
β”‚    β οΈ κΈ°μ΅΄ λ°±μ—… λ°μ΄ν„°λ” λ³µνΈν™” λ¶κ°€ (κ²½κ³  ν‘μ‹)                     β”‚
β”‚                                                                     β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

### 6.7 κΈ°μ΅΄ λ°μ΄ν„° λ§μ΄κ·Έλ μ΄μ… μ „λµ

μ•”νΈν™” μ μ© μ‹ κΈ°μ΅΄ ν‰λ¬Έ λ°μ΄ν„°μ μ²λ¦¬ λ°©λ²•μ…λ‹λ‹¤.

#### 6.7.1 μ €μ¥μ†λ³„ λ§μ΄κ·Έλ μ΄μ… μ •μ±…

| μ €μ¥μ† | λ§μ΄κ·Έλ μ΄μ… | μ„¤λ… |
|--------|-------------|------|
| **localStorage** | λ¶ν•„μ” | μΊμ‹ λ©μ , ν‰λ¬Έ μ μ§€ |
| **Firebase** | μ μ§„μ  | μμ • μ‹ μ•”νΈν™” μ μ© |
| **λ΅μ»¬ λ°±μ—… (.json)** | μλ™ | .encλ΅ μλ™ λ³€ν™ |

#### 6.7.2 localStorage (λ³€κ²½ μ—†μ)

```
ν„μ¬: ν‰λ¬Έ JSON μ €μ¥
λ³€κ²½: μ—†μ (μΊμ‹ λ©μ )

μ΄μ :
- localStorageλ” μ•± λ‚΄ μ„μ‹ μΊμ‹ μ©λ„
- μ‹¤μ  μκµ¬ μ €μ¥μ€ Firebaseμ™€ λ΅μ»¬ λ°±μ—…μ΄ λ‹΄λ‹Ή
- μ•”νΈν™”ν•λ©΄ μ„±λ¥λ§ μ €ν•λ¨
```

#### 6.7.3 Firebase (μ μ§„μ  λ§μ΄κ·Έλ μ΄μ…)

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚  Firebase μ μ§„μ  λ§μ΄κ·Έλ μ΄μ…                                        β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚                                                                     β”‚
β”‚  [μ½κΈ° μ‹]                                                          β”‚
β”‚    λ°μ΄ν„° λ΅λ“ β†’ μ•”νΈν™” μ—¬λ¶€ νλ³„ β†’ λ³µνΈν™” or ν‰λ¬Έ κ·Έλ€λ΅            β”‚
β”‚                                                                     β”‚
β”‚  [μ“°κΈ° μ‹]                                                          β”‚
β”‚    λ°μ΄ν„° μμ • β†’ λ―Όκ° ν•„λ“ μ•”νΈν™” β†’ μ €μ¥                            β”‚
β”‚                                                                     β”‚
β”‚  κ²°κ³Ό: μ‚¬μ©μκ°€ μμ •ν• λ μ½”λ“λ§ μμ—°μ¤λ½κ² μ•”νΈν™”λ¨                  β”‚
β”‚        κΈ°μ΅΄ λ μ½”λ“λ” μ½κΈ° κ°€λ¥ μƒνƒ μ μ§€                             β”‚
β”‚                                                                     β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

**μ•”νΈν™” μ—¬λ¶€ νλ³„ λ΅μ§:**
```javascript
function isEncrypted(fieldValue) {
  // μ•”νΈν™”λ λ°μ΄ν„°λ” ν•­μƒ "ENC:" μ ‘λ‘μ‚¬λ΅ μ‹μ‘
  return typeof fieldValue === 'string' && fieldValue.startsWith('ENC:');
}

function readField(fieldValue, key) {
  if (isEncrypted(fieldValue)) {
    return decryptFromFirebase(fieldValue.substring(4), key);
  }
  return fieldValue;  // ν‰λ¬Έ κ·Έλ€λ΅ λ°ν™
}
```

#### 6.7.4 λ΅μ»¬ λ°±μ—… νμΌ (μλ™ λ§μ΄κ·Έλ μ΄μ…)

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚  λ΅μ»¬ λ°±μ—… μλ™ λ§μ΄κ·Έλ μ΄μ…                                         β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚                                                                     β”‚
β”‚  μ•± μ‹μ‘ μ‹:                                                        β”‚
β”‚    1. .json νμΌ μ΅΄μ¬ ν™•μΈ                                          β”‚
β”‚    2. μ΅΄μ¬ν•λ©΄:                                                     β”‚
β”‚       - λ‚΄μ© μ½κΈ°                                                   β”‚
β”‚       - μ•”νΈν™”ν•μ—¬ .enc νμΌλ΅ μ €μ¥                                 β”‚
β”‚       - μ›λ³Έ .json β†’ .json.backup μΌλ΅ μ΄λ¦„ λ³€κ²½ (μ‚­μ  μ• ν•¨)       β”‚
β”‚    3. μ΄ν›„ μλ™ μ €μ¥μ€ .enc νμΌμ—λ§ μν–‰                           β”‚
β”‚                                                                     β”‚
β”‚  λ³µκµ¬ ν•„μ” μ‹:                                                      β”‚
β”‚    - .enc νμΌ μ°μ„  μ‚¬μ© (λ³µνΈν™”)                                   β”‚
β”‚    - .enc μ—†μΌλ©΄ .json.backup μ‚¬μ© (ν‰λ¬Έ)                           β”‚
β”‚                                                                     β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

**λ§μ΄κ·Έλ μ΄μ… μ½”λ“ μμ‹:**
```javascript
async function migrateJsonToEncrypted(basePath, year) {
  const jsonPath = `${basePath}/auto-save-soil-${year}.json`;
  const encPath = `${basePath}/auto-save-soil-${year}.enc`;
  const backupPath = `${basePath}/auto-save-soil-${year}.json.backup`;

  // .json νμΌμ΄ μ΅΄μ¬ν•κ³  .enc νμΌμ΄ μ—†λ” κ²½μ°λ§ λ§μ΄κ·Έλ μ΄μ…
  if (await fileExists(jsonPath) && !await fileExists(encPath)) {
    const plainData = await readFile(jsonPath);
    const encryptedData = encryptForBackup(plainData);

    await writeFile(encPath, encryptedData);
    await renameFile(jsonPath, backupPath);  // μ›λ³Έ λ³΄μ΅΄

    console.log(`λ§μ΄κ·Έλ μ΄μ… μ™„λ£: ${jsonPath} β†’ ${encPath}`);
  }
}
```

#### 6.7.5 νΈν™μ„± μ μ§€ κΈ°κ°„

```
Phase 1 (μ¶μ‹ ν›„ 6κ°μ›”):
  - μ½κΈ°: .enc (μ•”νΈν™”) + .json (ν‰λ¬Έ) λ¨λ‘ μ§€μ›
  - μ“°κΈ°: .enc (μ•”νΈν™”)λ§ μ‚¬μ©
  - .json νμΌμ€ .backupμΌλ΅ λ³΄μ΅΄

Phase 2 (6κ°μ›” ν›„):
  - μ½κΈ°: .enc μ°μ„ , .backup ν΄λ°±
  - μ•± μ„¤μ •μ—μ„ "λ κ±°μ‹ νμΌ μ •λ¦¬" μµμ… μ κ³µ

Phase 3 (1λ…„ ν›„):
  - .backup νμΌ μ‚­μ  μµμ… ν™μ„±ν™”
  - μ‚¬μ©μ μ„ νƒμ— λ”°λΌ μ •λ¦¬
```

---

## 7. κµ¬ν„ νƒμ¤ν¬ κ³„ν

### 7.1 Phase 1: λ΅μ»¬ λ°±μ—… μ•”νΈν™” (μ°μ„  κµ¬ν„)

| # | νƒμ¤ν¬ | μμƒ μ‹κ°„ | μμ΅΄μ„± | νμΌ |
|---|--------|----------|--------|------|
| 1.1 | CryptoJS λΌμ΄λΈλ¬λ¦¬ μ¶”κ°€ | 30λ¶„ | - | `index.html` (κ° νμ΄μ§€) |
| 1.2 | μ•”νΈν™” μ ν‹Έλ¦¬ν‹° λ¨λ“ μƒμ„± | 2μ‹κ°„ | 1.1 | `src/shared/crypto-utils.js` |
| 1.3 | Electron safeStorage ν‚¤ κ΄€λ¦¬ | 2μ‹κ°„ | - | `src/index.js`, `src/preload.js` |
| 1.4 | performAutoSave() μ•”νΈν™” μ μ© | 1μ‹κ°„ | 1.2 | `src/shared/utils.js` |
| 1.5 | loadFromAutoSaveFile() λ³µνΈν™” μ μ© | 1μ‹κ°„ | 1.2 | `src/shared/utils.js` |
| 1.6 | "λ°±μ—…μ—μ„ λ³µκµ¬" UI μ¶”κ°€ | 2μ‹κ°„ | 1.5 | κ° νμ΄μ§€ HTML/JS |
| 1.7 | κΈ°μ΅΄ .json β†’ .enc λ§μ΄κ·Έλ μ΄μ… | 1μ‹κ°„ | 1.4 | `src/shared/utils.js` |
| 1.8 | ν…μ¤νΈ λ° λ²„κ·Έ μμ • | 2μ‹κ°„ | 1.1~1.7 | - |

**Phase 1 μ΄ μμƒ μ‹κ°„: 12μ‹κ°„**

### 7.2 Phase 2: Firebase μ•”νΈν™”

| # | νƒμ¤ν¬ | μμƒ μ‹κ°„ | μμ΅΄μ„± | νμΌ |
|---|--------|----------|--------|------|
| 2.1 | Firebase μ•”νΈν™” ν‚¤ μƒμ„± λ΅μ§ | 1μ‹κ°„ | 1.2 | `src/shared/crypto-utils.js` |
| 2.2 | encryptForFirebase() ν•¨μ | 2μ‹κ°„ | 2.1 | `src/shared/crypto-utils.js` |
| 2.3 | decryptFromFirebase() ν•¨μ | 2μ‹κ°„ | 2.1 | `src/shared/crypto-utils.js` |
| 2.4 | firestore-db.js μ €μ¥ λ΅μ§ μμ • | 2μ‹κ°„ | 2.2 | `src/shared/firestore-db.js` |
| 2.5 | firestore-db.js λ΅λ“ λ΅μ§ μμ • | 2μ‹κ°„ | 2.3 | `src/shared/firestore-db.js` |
| 2.6 | κΈ°μ΅΄ λ°μ΄ν„° λ§μ΄κ·Έλ μ΄μ… μ¤ν¬λ¦½νΈ | 3μ‹κ°„ | 2.2, 2.3 | `scripts/migrate-firebase.js` |
| 2.7 | ν…μ¤νΈ λ° λ²„κ·Έ μμ • | 3μ‹κ°„ | 2.1~2.6 | - |

**Phase 2 μ΄ μμƒ μ‹κ°„: 15μ‹κ°„**

### 7.3 Phase 3: κ³ κΈ‰ κΈ°λ¥

| # | νƒμ¤ν¬ | μμƒ μ‹κ°„ | μμ΅΄μ„± | νμΌ |
|---|--------|----------|--------|------|
| 3.1 | λΉ„λ°€λ²νΈ λ³€κ²½ κΈ°λ¥ | 2μ‹κ°„ | 1.3 | μ„¤μ • νμ΄μ§€ |
| 3.2 | ν‚¤ λ³µκµ¬ ννΈ κΈ°λ¥ | 1μ‹κ°„ | 3.1 | μ„¤μ • νμ΄μ§€ |
| 3.3 | μ•”νΈν™” μƒνƒ ν‘μ‹ UI | 1μ‹κ°„ | 1.4, 2.4 | κ° νμ΄μ§€ |
| 3.4 | μ•”νΈν™” μ„¤μ • μµμ… | 2μ‹κ°„ | - | μ„¤μ • νμ΄μ§€ |

**Phase 3 μ΄ μμƒ μ‹κ°„: 6μ‹κ°„**

### 7.4 μ „μ²΄ νƒ€μ„λΌμΈ

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚  κµ¬ν„ νƒ€μ„λΌμΈ                                                       β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚                                                                     β”‚
β”‚  Week 1: Phase 1 (λ΅μ»¬ λ°±μ—… μ•”νΈν™”)                                 β”‚
β”‚    β”β”€β”€ Day 1-2: 1.1 ~ 1.3 (λΌμ΄λΈλ¬λ¦¬ & ν‚¤ κ΄€λ¦¬)                    β”‚
β”‚    β”β”€β”€ Day 3-4: 1.4 ~ 1.6 (μ•”νΈν™”/λ³µνΈν™” μ μ©)                      β”‚
β”‚    β””β”€β”€ Day 5: 1.7 ~ 1.8 (λ§μ΄κ·Έλ μ΄μ… & ν…μ¤νΈ)                     β”‚
β”‚                                                                     β”‚
β”‚  Week 2: Phase 2 (Firebase μ•”νΈν™”)                                  β”‚
β”‚    β”β”€β”€ Day 1-2: 2.1 ~ 2.3 (μ•”νΈν™” ν•¨μ)                             β”‚
β”‚    β”β”€β”€ Day 3-4: 2.4 ~ 2.5 (Firestore μ μ©)                          β”‚
β”‚    β””β”€β”€ Day 5: 2.6 ~ 2.7 (λ§μ΄κ·Έλ μ΄μ… & ν…μ¤νΈ)                     β”‚
β”‚                                                                     β”‚
β”‚  Week 3: Phase 3 + μµμΆ… κ²€μ¦                                        β”‚
β”‚    β”β”€β”€ Day 1-2: 3.1 ~ 3.4 (κ³ κΈ‰ κΈ°λ¥)                               β”‚
β”‚    β””β”€β”€ Day 3-5: μ „μ²΄ ν†µν•© ν…μ¤νΈ & λ°°ν¬                             β”‚
β”‚                                                                     β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

---

## 8. μ½”λ“ μμ‹

### 8.1 crypto-utils.js (μ‹ κ· μƒμ„±)

```javascript
/**
 * μ•”νΈν™” μ ν‹Έλ¦¬ν‹° λ¨λ“
 * @module crypto-utils
 */

// CryptoJS λΌμ΄λΈλ¬λ¦¬ ν•„μ”
// <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.2.0/crypto-js.min.js"></script>

const CryptoUtils = (function() {
    'use strict';

    // λ―Όκ° ν•„λ“ μ •μ
    const SENSITIVE_FIELDS = ['name', 'phone', 'address', 'birthDate', 'corpNumber', 'parcels'];

    // Salt (μ•± κ³ μ κ°’)
    const APP_SALT = 'sample-log-electron-2026';

    /**
     * λΉ„λ°€λ²νΈλ΅λ¶€ν„° μ•”νΈν™” ν‚¤ μ λ„
     * @param {string} password - μ‚¬μ©μ λΉ„λ°€λ²νΈ
     * @param {string} [salt] - Salt κ°’
     * @returns {CryptoJS.lib.WordArray} μ•”νΈν™” ν‚¤
     */
    function deriveKey(password, salt = APP_SALT) {
        return CryptoJS.PBKDF2(password, salt, {
            keySize: 256 / 32,
            iterations: 100000,
            hasher: CryptoJS.algo.SHA256
        });
    }

    /**
     * λ¬Έμμ—΄ μ•”νΈν™”
     * @param {string} plainText - ν‰λ¬Έ
     * @param {string} key - μ•”νΈν™” ν‚¤ (λλ” λΉ„λ°€λ²νΈ)
     * @returns {string} μ•”νΈν™”λ λ¬Έμμ—΄ (Base64)
     */
    function encrypt(plainText, key) {
        if (!plainText) return plainText;
        try {
            return CryptoJS.AES.encrypt(plainText, key).toString();
        } catch (error) {
            console.error('μ•”νΈν™” μ‹¤ν¨:', error);
            return null;
        }
    }

    /**
     * λ¬Έμμ—΄ λ³µνΈν™”
     * @param {string} cipherText - μ•”νΈν™”λ λ¬Έμμ—΄
     * @param {string} key - λ³µνΈν™” ν‚¤ (λλ” λΉ„λ°€λ²νΈ)
     * @returns {string} ν‰λ¬Έ
     */
    function decrypt(cipherText, key) {
        if (!cipherText) return cipherText;
        try {
            const bytes = CryptoJS.AES.decrypt(cipherText, key);
            return bytes.toString(CryptoJS.enc.Utf8);
        } catch (error) {
            console.error('λ³µνΈν™” μ‹¤ν¨:', error);
            return null;
        }
    }

    /**
     * μ „μ²΄ λ°μ΄ν„° μ•”νΈν™” (λ΅μ»¬ λ°±μ—…μ©)
     * @param {Array} data - μ‹λ£ λ°μ΄ν„° λ°°μ—΄
     * @param {string} key - μ•”νΈν™” ν‚¤
     * @returns {string} μ•”νΈν™”λ μ „μ²΄ λ°μ΄ν„°
     */
    function encryptBackup(data, key) {
        const jsonString = JSON.stringify({
            version: '2.0-encrypted',
            exportDate: new Date().toISOString(),
            totalRecords: data.length,
            data: data
        });
        return encrypt(jsonString, key);
    }

    /**
     * μ „μ²΄ λ°μ΄ν„° λ³µνΈν™” (λ΅μ»¬ λ°±μ—…μ©)
     * @param {string} encryptedData - μ•”νΈν™”λ λ°μ΄ν„°
     * @param {string} key - λ³µνΈν™” ν‚¤
     * @returns {Object} λ³µνΈν™”λ λ°μ΄ν„° κ°μ²΄
     */
    function decryptBackup(encryptedData, key) {
        const decrypted = decrypt(encryptedData, key);
        if (!decrypted) return null;
        try {
            return JSON.parse(decrypted);
        } catch (error) {
            console.error('JSON νμ‹± μ‹¤ν¨:', error);
            return null;
        }
    }

    /**
     * κ°λ³„ λ μ½”λ“μ λ―Όκ° ν•„λ“ μ•”νΈν™” (Firebaseμ©)
     * @param {Object} record - μ‹λ£ λ μ½”λ“
     * @param {string} key - μ•”νΈν™” ν‚¤
     * @returns {Object} λ―Όκ° ν•„λ“κ°€ μ•”νΈν™”λ λ μ½”λ“
     */
    function encryptRecord(record, key) {
        const encrypted = { ...record, _encrypted: {} };

        SENSITIVE_FIELDS.forEach(field => {
            if (record[field] !== undefined) {
                if (typeof record[field] === 'object') {
                    encrypted._encrypted[field] = encrypt(JSON.stringify(record[field]), key);
                } else {
                    encrypted._encrypted[field] = encrypt(String(record[field]), key);
                }
                delete encrypted[field];
            }
        });

        return encrypted;
    }

    /**
     * κ°λ³„ λ μ½”λ“μ λ―Όκ° ν•„λ“ λ³µνΈν™” (Firebaseμ©)
     * @param {Object} record - μ•”νΈν™”λ μ‹λ£ λ μ½”λ“
     * @param {string} key - λ³µνΈν™” ν‚¤
     * @returns {Object} λ³µνΈν™”λ λ μ½”λ“
     */
    function decryptRecord(record, key) {
        if (!record._encrypted) return record;

        const decrypted = { ...record };
        delete decrypted._encrypted;

        Object.keys(record._encrypted).forEach(field => {
            const decryptedValue = decrypt(record._encrypted[field], key);
            if (decryptedValue) {
                try {
                    decrypted[field] = JSON.parse(decryptedValue);
                } catch {
                    decrypted[field] = decryptedValue;
                }
            }
        });

        return decrypted;
    }

    /**
     * λ°μ΄ν„° λ°°μ—΄ μ „μ²΄ μ•”νΈν™” (Firebaseμ©)
     * @param {Array} records - μ‹λ£ λ°μ΄ν„° λ°°μ—΄
     * @param {string} key - μ•”νΈν™” ν‚¤
     * @returns {Array} μ•”νΈν™”λ λ°μ΄ν„° λ°°μ—΄
     */
    function encryptRecords(records, key) {
        return records.map(record => encryptRecord(record, key));
    }

    /**
     * λ°μ΄ν„° λ°°μ—΄ μ „μ²΄ λ³µνΈν™” (Firebaseμ©)
     * @param {Array} records - μ•”νΈν™”λ λ°μ΄ν„° λ°°μ—΄
     * @param {string} key - λ³µνΈν™” ν‚¤
     * @returns {Array} λ³µνΈν™”λ λ°μ΄ν„° λ°°μ—΄
     */
    function decryptRecords(records, key) {
        return records.map(record => decryptRecord(record, key));
    }

    // Public API
    return {
        deriveKey,
        encrypt,
        decrypt,
        encryptBackup,
        decryptBackup,
        encryptRecord,
        decryptRecord,
        encryptRecords,
        decryptRecords,
        SENSITIVE_FIELDS
    };
})();

// μ „μ—­ λ…Έμ¶
if (typeof window !== 'undefined') {
    window.CryptoUtils = CryptoUtils;
}

// Node.js ν™κ²½
if (typeof module !== 'undefined' && module.exports) {
    module.exports = CryptoUtils;
}
```

### 8.2 utils.js performAutoSave() μμ • μμ‹

```javascript
/**
 * μλ™ μ €μ¥ μν–‰ (μ•”νΈν™” λ²„μ „)
 */
async function performAutoSave(options) {
    const { FileAPI, moduleKey, data, webFileHandle, log = console.log } = options;
    const enabledKey = `${moduleKey}AutoSaveEnabled`;

    if (localStorage.getItem(enabledKey) !== 'true') return false;

    // μ•”νΈν™” ν‚¤ κ°€μ Έμ¤κΈ°
    const encryptionKey = await getEncryptionKey();

    // λ°μ΄ν„° μ•”νΈν™”
    const encryptedContent = window.CryptoUtils.encryptBackup(data, encryptionKey);

    if (!encryptedContent) {
        log('β λ°±μ—… μ•”νΈν™” μ‹¤ν¨');
        return false;
    }

    // Electron ν™κ²½
    if (window.isElectron && FileAPI.autoSavePath) {
        try {
            // νμΌλ… λ³€κ²½: .json β†’ .enc
            const encPath = FileAPI.autoSavePath.replace('.json', '.enc');
            const result = await window.electronAPI.writeFile(encPath, encryptedContent);
            if (result.success) {
                log('π” μ•”νΈν™” λ°±μ—… μ €μ¥ μ™„λ£:', encPath);
                return true;
            }
        } catch (error) {
            console.error('λ°±μ—… μ €μ¥ μ‹¤ν¨:', error);
        }
    }

    // Web ν™κ²½ (File System Access API)
    if (webFileHandle) {
        try {
            const writable = await webFileHandle.createWritable();
            await writable.write(encryptedContent);
            await writable.close();
            log('π” μ•”νΈν™” λ°±μ—… μ €μ¥ μ™„λ£ (Web)');
            return true;
        } catch (error) {
            console.error('μ›Ή λ°±μ—… μ €μ¥ μ‹¤ν¨:', error);
        }
    }

    return false;
}
```

### 8.3 loadFromAutoSaveFile() μμ • μμ‹

```javascript
/**
 * μλ™ μ €μ¥ νμΌμ—μ„ λ΅λ“ (λ³µνΈν™” λ²„μ „)
 */
async function loadFromAutoSaveFile(options) {
    const { FileAPI, moduleKey, log = console.log } = options;

    // Electron ν™κ²½
    if (window.isElectron && FileAPI.autoSavePath) {
        try {
            // .enc νμΌ λ¨Όμ € μ‹λ„
            const encPath = FileAPI.autoSavePath.replace('.json', '.enc');
            let result = await window.electronAPI.readFile(encPath);

            if (result.success && result.content) {
                // μ•”νΈν™” ν‚¤ κ°€μ Έμ¤κΈ°
                const encryptionKey = await getEncryptionKey();

                // λ³µνΈν™”
                const decrypted = window.CryptoUtils.decryptBackup(result.content, encryptionKey);

                if (decrypted && decrypted.data) {
                    log('π”“ μ•”νΈν™” λ°±μ—…μ—μ„ λ³µμ›:', decrypted.data.length, 'κ±΄');
                    return decrypted.data;
                }
            }

            // κΈ°μ΅΄ .json νμΌ ν΄λ°± (λ§μ΄κ·Έλ μ΄μ… μ „)
            result = await window.electronAPI.readFile(FileAPI.autoSavePath);
            if (result.success && result.content) {
                const data = JSON.parse(result.content);
                log('π“‚ κΈ°μ΅΄ λ°±μ—…μ—μ„ λ³µμ›:', data.data?.length || data.length, 'κ±΄');
                return data.data || data;
            }
        } catch (error) {
            console.error('λ°±μ—… λ΅λ“ μ‹¤ν¨:', error);
        }
    }

    return null;
}
```

---

## 9. λ³΄μ• κ³ λ ¤μ‚¬ν•­

### 9.1 Do's (κ¶μ¥)

- β… PBKDF2λ΅ λΉ„λ°€λ²νΈμ—μ„ ν‚¤ μ λ„ (iterations β‰¥ 100,000)
- β… μ•”νΈν™” ν‚¤λ¥Ό λ©”λ¨λ¦¬μ—λ§ μ μ§€ (localStorage μ €μ¥ κΈμ§€)
- β… Electron safeStorage μ‚¬μ© (OS ν‚¤μ²΄μΈ ν™μ©)
- β… λ³µνΈν™” μ‹¤ν¨ μ‹ μ μ ν• μ—λ¬ ν•Έλ“¤λ§
- β… λ§μ΄κ·Έλ μ΄μ… μ „ κΈ°μ΅΄ λ°μ΄ν„° λ°±μ—…

### 9.2 Don'ts (κΈμ§€)

- β μ•”νΈν™” ν‚¤ ν•λ“μ½”λ”©
- β μ•”νΈν™” ν‚¤λ¥Ό localStorage/sessionStorageμ— μ €μ¥
- β μ½μ†”μ— μ•”νΈν™” ν‚¤ λ΅κΉ…
- β μ•½ν• λΉ„λ°€λ²νΈ ν—μ© (μµμ† 8μ μ΄μƒ κ¶μ¥)
- β λ™μΌν• ν‚¤λ΅ λ¬΄ν•μ • λ°μ΄ν„° μ•”νΈν™” (μ£ΌκΈ°μ  ν‚¤ λ³€κ²½ κ¶μ¥)

### 9.3 μ„ν— μ”μ† λ° λ€μ‘

| μ„ν— | μν–¥ | λ€μ‘ |
|------|------|------|
| ν‚¤ λ¶„μ‹¤ | λ°μ΄ν„° λ³µκµ¬ λ¶κ°€ | ν‚¤ ννΈ κΈ°λ¥, λ³µκµ¬ μ½”λ“ μ κ³µ |
| μ—­κ³µν•™ | μ•± λ‚΄μ¥ ν‚¤ λ…Έμ¶ | μ‚¬μ©μ λΉ„λ°€λ²νΈ κΈ°λ° ν‚¤ μ‚¬μ© |
| λ©”λ¨λ¦¬ λ¤ν”„ | λ°νƒ€μ„ ν‚¤ λ…Έμ¶ | λ―Όκ° μ •λ³΄ μ‚¬μ© ν›„ μ¦‰μ‹ μ κ±° |
| λ²„μ „ νΈν™μ„± | μ•”νΈν™” ν¬λ§· λ³€κ²½ μ‹ | λ²„μ „ ν•„λ“λ΅ λ§μ΄κ·Έλ μ΄μ… μ§€μ› |

---

## 10. λ΅¤λ°± κ³„ν

### 10.1 λ΅¤λ°± μ‹λ‚λ¦¬μ¤

```
1. μ•”νΈν™” κΈ°λ¥μ— μ‹¬κ°ν• λ²„κ·Έ λ°μƒ
2. λ€λ‰μ λ°μ΄ν„° λ³µνΈν™” μ‹¤ν¨
3. μ„±λ¥ μ €ν•λ΅ μ‚¬μ© λ¶κ°€
```

### 10.2 λ΅¤λ°± μ μ°¨

```
1. μ•”νΈν™” κΈ°λ¥ λΉ„ν™μ„±ν™” (μ„¤μ • ν”λκ·Έ)
2. κΈ°μ΅΄ ν‰λ¬Έ λ°±μ—… νμΌλ΅ λ³µμ›
3. Firebase λ°μ΄ν„°λ” ν‰λ¬Έ λ¨λ“λ΅ μ „ν™
4. λ²„κ·Έ μμ • ν›„ μ¬λ°°ν¬
```

### 10.3 λ°μ΄ν„° λ³΄μ΅΄

```
- λ§μ΄κ·Έλ μ΄μ… μ‹ κΈ°μ΅΄ .json νμΌ μ‚­μ ν•μ§€ μ•μ
- μ•”νΈν™” μ‹¤ν¨ μ‹ ν‰λ¬Έ μ €μ¥ ν΄λ°±
- λ³µνΈν™” μ‹¤ν¨ μ‹ μ›λ³Έ λ°μ΄ν„° μ μ§€
```

---

## λ¶€λ΅

### A. μ°Έκ³  μλ£

- [CryptoJS Documentation](https://cryptojs.gitbook.io/docs/)
- [Electron safeStorage](https://www.electronjs.org/docs/latest/api/safe-storage)
- [Web Crypto API](https://developer.mozilla.org/en-US/docs/Web/API/Web_Crypto_API)
- [OWASP Cryptographic Storage Cheat Sheet](https://cheatsheetseries.owasp.org/cheatsheets/Cryptographic_Storage_Cheat_Sheet.html)

### B. μ²΄ν¬λ¦¬μ¤νΈ

#### Phase 1 μ™„λ£ μ²΄ν¬λ¦¬μ¤νΈ

- [ ] CryptoJS λΌμ΄λΈλ¬λ¦¬ μ¶”κ°€λ¨
- [ ] crypto-utils.js μƒμ„±λ¨
- [ ] Electron safeStorage μ—°λ™λ¨
- [ ] performAutoSave() μ•”νΈν™” μ μ©λ¨
- [ ] loadFromAutoSaveFile() λ³µνΈν™” μ μ©λ¨
- [ ] "λ°±μ—…μ—μ„ λ³µκµ¬" UI μ¶”κ°€λ¨
- [ ] κΈ°μ΅΄ .json β†’ .enc λ§μ΄κ·Έλ μ΄μ… μ™„λ£
- [ ] λ¨λ“  μ‹λ£ νƒ€μ… (5κ°) ν…μ¤νΈ μ™„λ£

#### Phase 2 μ™„λ£ μ²΄ν¬λ¦¬μ¤νΈ

- [ ] Firebase μ•”νΈν™” ν‚¤ μƒμ„± λ΅μ§ κµ¬ν„λ¨
- [ ] encryptForFirebase() ν•¨μ κµ¬ν„λ¨
- [ ] decryptFromFirebase() ν•¨μ κµ¬ν„λ¨
- [ ] firestore-db.js μ €μ¥/λ΅λ“ μμ •λ¨
- [ ] κΈ°μ΅΄ Firebase λ°μ΄ν„° λ§μ΄κ·Έλ μ΄μ… μ™„λ£
- [ ] λ¨λ“  μ‹λ£ νƒ€μ… Firebase ν…μ¤νΈ μ™„λ£

---

*λ¬Έμ„ λ*
